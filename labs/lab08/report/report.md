---
## Front matter
title: "Отчёт по лабораторной работе №8"
subtitle: "Сетевые технологии"
author: "Ищенко Ирина НПИбд-02-22"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
 name: russian
 options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
 name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
 - parentracker=true
 - backend=biber
 - hyperref=auto
 - language=auto
 - autolang=other*
 - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
 - \usepackage{indentfirst}
 - \usepackage{float} # keep figures where there are in the text
 - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Изучение принципов маршрутизации в IPv4- и IPv6-сетях и принципов настройки сетевого оборудования.


# Выполнение лабораторной работы

Строим заданную топологию сети, используя Vyos мфршрутизаторы, так как FRR у меня не работают. Стартуем все вершины и запускаем захват трафика на соединениях между коммутаторами и маршрутизаторами (рис. [-@fig:001]).

![Топология сети](image/1.png){#fig:001 width=70%}

Задаем IPv4 адреса оконечным устройствам (рис. [-@fig:002]) и (рис. [-@fig:003]).

![IPv4 на PC1](image/2.png){#fig:002 width=70%} 
 
![IPv4 на PC2](image/3.png){#fig:003 width=70%} 

Настроим IPv4-адреса на интерфейсах маршрутизаторов (рис. [-@fig:004]), (рис. [-@fig:005]), (рис. [-@fig:006]) и (рис. [-@fig:007]). 

![IPv4-адреса](image/4.png){#fig:004 width=70%} 

![IPv4-адреса](image/5.png){#fig:005 width=70%} 

![IPv4-адреса](image/6.png){#fig:006 width=70%} 

![IPv4-адреса](image/7.png){#fig:007 width=70%} 

Присваиваем IPv6-адреса оконечным устройствам PC1 и PC2 (рис. [-@fig:008]) и (рис. [-@fig:009]). 

![IPv6 на PC1](image/8.png){#fig:008 width=70%} 

![IPv6 на PC2](image/9.png){#fig:009 width=70%} 

Настроим IPv6-адреса на интерфейсах маршрутизаторов (рис. [-@fig:010]), (рис. [-@fig:011]), (рис. [-@fig:012]) и (рис. [-@fig:013]). 

![IPv6-адреса](image/10.png){#fig:010 width=70%} 

![IPv6-адреса](image/11.png){#fig:011 width=70%} 

![IPv6-адреса](image/12.png){#fig:012 width=70%} 

![IPv6-адреса](image/13.png){#fig:013 width=70%}

На маршрутизаторах настроим RIP в качестве протокола динамической и проверим метрики протокола RIP
маршрутизации (рис. [-@fig:014]), (рис. [-@fig:015]), (рис. [-@fig:016]), (рис. [-@fig:017]), (рис. [-@fig:018]), (рис. [-@fig:019]) и (рис. [-@fig:020]). 

![RIP](image/14.png){#fig:014 width=70%} 

![RIP](image/15.png){#fig:015 width=70%} 

![RIP](image/16.png){#fig:016 width=70%} 
 
![RIP](image/17.png){#fig:017 width=70%} 

![RIP](image/18.png){#fig:018 width=70%} 
 
![RIP](image/19.png){#fig:019 width=70%} 

![RIP](image/20.png){#fig:020 width=70%} 

С PC1 пропингуем PC2 и определим путь следования пакетов(рис. [-@fig:021]). Пакеты следуют по маршруту через маршрутизаторы gw-01 -> gw-02 -> gw-03.

![Пинг](image/21.png){#fig:021 width=70%} 

Проверим метрики протокола RIP(рис. [-@fig:022]).

![Метрики протокола RIP](image/22.png){#fig:022 width=70%}

Отключим интерфейс на маршрутизаторе(рис. [-@fig:023]). 

![Отключение интерфейса](image/23.png){#fig:023 width=70%} 

Проверим метрики протокола (рис. [-@fig:024]).

![RIP](image/24.png){#fig:024 width=70%} 

Пропингуем PC2 (рис. [-@fig:025]). 

![Пинг](image/25.png){#fig:025 width=70%} 

Восстановим интерфейс(рис. [-@fig:026]). 

![Восстановление интерфейса](image/26.png){#fig:026 width=70%} 

Проверим, что пинг также воссстановлен (рис. [-@fig:027]). 

![Пинг](image/27.png){#fig:027 width=70%} 

Посмотрим захваченный трафик по протоколу RIP(рис. [-@fig:028]). 

![Захваченный трафик](image/28.png){#fig:028 width=70%} 

На маршрутизаторах настроим RIPng для сетей IPv6 (рис. [-@fig:029]), (рис. [-@fig:030]), (рис. [-@fig:031]) и (рис. [-@fig:032]).
 
![RIPng](image/29.png){#fig:029 width=70%} 

![RIPng](image/30.png){#fig:030 width=70%} 

![RIPng](image/31.png){#fig:031 width=70%} 

![RIPng](image/32.png){#fig:032 width=70%} 

С PC1 пропингуем PC2 и определим путь следования пакетов (рис. [-@fig:033]). Пакеты следуют по маршруту через маршрутизаторы gw-01 -> gw-02 -> gw-03.

![Пинг](image/33.png){#fig:033 width=70%} 

Проверим метрики протокола RIPng (рис. [-@fig:034]). 

![Метрики протокола](image/34.png){#fig:034 width=70%} 

Отключаем интерфейс на маршрутизаторе (рис. [-@fig:035]). 

![Отключение интерфейса](image/35.png){#fig:035 width=70%} 

Просматриваем информацию о протоколе (рис. [-@fig:036]). 

![Метрики протокола](image/36.png){#fig:036 width=70%} 

Пингуем (рис. [-@fig:037]). Пинг идет не сразу.

![Пинг](image/37.png){#fig:037 width=70%} 

Включаем интерфейс (рис. [-@fig:038]). 

![Включение интерфейса](image/38.png){#fig:038 width=70%} 

Пингуем (рис. [-@fig:039]).
 
![Пинг](image/39.png){#fig:039 width=70%} 

Просматриваем захваченный трафик(рис. [-@fig:040]). 

![Захваченный трафик](image/40.png){#fig:040 width=70%} 

На маршрутизаторах настроим OSPFv2 для сетей IPv4 и просмотрим информацию (рис. [-@fig:041]). 

![Настройка OSPF](image/41.png){#fig:041 width=70%} 

Пропингуем PC2 (рис. [-@fig:042]). 

![Пинг](image/42.png){#fig:042 width=70%} 

Отключаем интерфейс (рис. [-@fig:043]). 

![Отключение интерфейса](image/43.png){#fig:043 width=70%} 

Пингуем (рис. [-@fig:044]).
 
![Пинг](image/44.png){#fig:044 width=70%} 

Просматриваем информацию (рис. [-@fig:045]). 

![Метрики протокола](image/45.png){#fig:045 width=70%} 

Включаем интерфейс(рис. [-@fig:046]). 

![Включение интерфейса](image/46.png){#fig:046 width=70%} 

Проверяем корректность пинга(рис. [-@fig:047]). 

![Пинг](image/47.png){#fig:047 width=70%}

Просматриваем захваченный трафик(рис. [-@fig:048]). 

![Захваченный трафик](image/48.png){#fig:048 width=70%} 

На маршрутизаторах настроим OSPFv3 для сетей IPv6(рис. [-@fig:049]). 

![Настройка OSPFv3](image/49.png){#fig:049 width=70%} 

Пропингуем PC2 (рис. [-@fig:050]). 

![Пинг](image/50.png){#fig:050 width=70%} 

Отключаем интерфейс (рис. [-@fig:051]). 

![Отключение](image/51.png){#fig:051 width=70%} 

Просматриваем информацию (рис. [-@fig:052]). 

![Метрики протокола](image/52.png){#fig:052 width=70%} 

Пингуем (рис. [-@fig:053]). 

![Пинг](image/53.png){#fig:053 width=70%} 

Включаем интрефейс (рис. [-@fig:054]).
 
![Включение](image/54.png){#fig:054 width=70%} 

Проверяем пинг (рис. [-@fig:055]). 

![Пинг](image/55.png){#fig:055 width=70%} 

Просматриваем захваченный трафик (рис. [-@fig:056]). 

![Захваченный трафик](image/56.png){#fig:056 width=70%} 

Заданы две IPv6-сети и IPv4-сеть. Перенесем заданную топологию(рис. [-@fig:057]). 

![Топология сети](image/57.png){#fig:057 width=70%} 

Присвоим адреса оконечным устройствам PC1 и PC2 (рис. [-@fig:058]) и (рис. [-@fig:059]). 

![Адрес на PC1](image/58.png){#fig:058 width=70%} 

![Адрес на PC2](image/59.png){#fig:059 width=70%} 

На маршрутизаторах перейдем в режим конфигурирования, изменим имя устройства. Настроим адреса на интерфейсах маршрутизаторов (рис. [-@fig:060]), (рис. [-@fig:061]), (рис. [-@fig:062]). 

![Настройка адресов](image/60.png){#fig:060 width=70%} 
 
![Настройка адресов](image/61.png){#fig:061 width=70%} 

![Настройка адресов](image/62.png){#fig:062 width=70%} 

Убедимся, что на PC появились адреса ближайших к ним маршрутизаторов (рис. [-@fig:063]) и (рис. [-@fig:064]). 

![Проверка адресов ближайших маршрутизаторов](image/63.png){#fig:063 width=70%} 

![Проверка адресов ближайших маршрутизаторов](image/64.png){#fig:064 width=70%} 

Проверим маршруты с маршрутизатора R1(рис. [-@fig:065]). 

![Проверка маршрутов](image/65.png){#fig:065 width=70%} 

Настроим маршрутизацию IPv4 по протоколу RIP(рис. [-@fig:066]). 

![Настройка маршрутизации](image/66.png){#fig:066 width=70%} 

Проверим маршруты с маршрутизатора R1 (рис. [-@fig:067]). 

![Проверка маршрутов](image/67.png){#fig:067 width=70%} 

Создадим туннель IPv6 через сеть IPv4 (рис. [-@fig:068]) и (рис. [-@fig:069]). 

![Создание туннеля](image/68.png){#fig:068 width=70%} 

![Создайте туннель IPv6 через сеть IPv4](image/69.png){#fig:069 width=70%} 

Проверим доступность оконечных устройств (рис. [-@fig:070]).

![Пинг](image/70.png){#fig:070 width=70%} 

Посмотрим захваченный трафик (рис. [-@fig:071]). 

![Захваченный трафик](image/71.png){#fig:071 width=70%} 


# Самостоятельная работа

По таблице адресов сетей (табл. [-@tbl:1]) разработаем таблицу адресации (табл. [-@tbl:2]).

: Таблица адресов сетей {#tbl:1}

| Устройства  | Сеть IPv4     | Сеть IPv6         |
|-------------|---------------|-------------------|
| PC1–gw-01   | 10.10.1.96/27 | 2001:db8:1:1::/64 |
| PC2–gw-02   | 10.10.1.64/28 | 2001:db8:1:6::/64 |
| gw-01–gw-03 | 10.10.1.4/30  | 2001:db8:1:2::/64 |
| gw-03–gw-02 | 10.10.1.8/30  | 2001:db8:1:3::/64 |
| gw-02–gw-04 | 10.10.1.16/30 | 2001:db8:1:4::/64 |
| gw-04–gw-01 | 10.10.1.32/30 | 2001:db8:1:5::/64 |

: Таблица адресации {#tbl:2}

| Устройство  | Интерфейс  | Адрес IP/префикс     | Шлюз по умолчанию | Следующее устройство |
|-------------|------------|----------------------|-------------------|----------------------|
| **gw-01**   | eth0       | 10.10.1.97/27       | n/a               | PC1                   |
| **gw-01**   | eth0       | 2001:db8:1:1::1/64  | n/a               | PC1                   |
| **gw-01**   | eth1       | 10.10.1.5/30        | n/a               | gw-03                 |
| **gw-01**   | eth1       | 2001:db8:1:2::1/64  | n/a               | gw-03                 |
| **gw-01**   | eth2       | 10.10.1.33/30       | n/a               | gw-04                 |
| **gw-01**   | eth2       | 2001:db8:1:5::1/64  | n/a               | gw-04                 |
| **gw-02**   | eth0       | 10.10.1.65/28       | n/a               | PC2                   |
| **gw-02**   | eth0       | 2001:db8:1:6::1/64  | n/a               | PC2                   |
| **gw-02**   | eth1       | 10.10.1.18/30       | n/a               | gw-03                 |
| **gw-02**   | eth1       | 2001:db8:1:4::2/64  | n/a               | gw-03                 |
| **gw-02**   | eth2       | 10.10.1.9/30        | n/a               | gw-04                 |
| **gw-02**   | eth2       | 2001:db8:1:3::1/64  | n/a               | gw-04                 |
| **gw-03**   | eth0       | 10.10.1.6/30        | n/a               | gw-01                 |
| **gw-03**   | eth0       | 2001:db8:1:2::2/64  | n/a               | gw-01                 |
| **gw-03**   | eth1       | 10.10.1.17/30       | n/a               | gw-02                 |
| **gw-03**   | eth1       | 2001:db8:1:4::1/64  | n/a               | gw-02                 |
| **gw-04**   | eth0       | 10.10.1.10/30       | n/a               | gw-02                 |
| **gw-04**   | eth0       | 2001:db8:1:3::2/64  | n/a               | gw-02                 |
| **gw-04**   | eth1       | 10.10.1.34/30       | n/a               | gw-01                 |
| **gw-04**   | eth1       | 2001:db8:1:5::2/64  | n/a               | gw-01                 |
| **PC1**     | NIC        | 10.10.1.98/27       | 10.10.1.97        | gw-01                 |
| **PC1**     | NIC        | 2001:db8:1:1::2/64  | n/a               | gw-01                 |
| **PC2**     | NIC        | 10.10.1.66/28       | 10.10.1.65        | gw-02                 |
| **PC2**     | NIC        | 2001:db8:1:6::2/64  | n/a               | gw-02                 |


Перенесем топологию сети и включим захват трафика на соединениях коммутатора и маршрутизатора(рис. [-@fig:072]). 

![Топология сети](image/72.png){#fig:072 width=70%} 

Зададим адреса на PC1(рис. [-@fig:073]). 

![Адреса на PC1](image/73.png){#fig:073 width=70%} 

Зададим адреса на PC2(рис. [-@fig:074]). 

![Адреса на PC2](image/74.png){#fig:074 width=70%} 

Настроим IPv4-адреса и IPv6-адреса на интерфейсах маршрутизаторов (рис. [-@fig:075]), (рис. [-@fig:076]), (рис. [-@fig:077]) и (рис. [-@fig:078]). 

![Настройка адресов](image/75.png){#fig:075 width=70%} 

![Настройка адресов](image/76.png){#fig:076 width=70%} 

![Настройка адресов](image/77.png){#fig:077 width=70%} 

![Настройка адресов](image/78.png){#fig:078 width=70%} 

Настроим маршрутизацию по протоколу RIP и посмотрим метрики протокола(рис. [-@fig:079]) и (рис. [-@fig:080]). 

![Настройка RIP](image/79.png){#fig:079 width=70%} 

![Метрики протокола](image/80.png){#fig:080 width=70%} 

Пропингуем оконечное устройство (рис. [-@fig:081]). 

![Пинг](image/81.png){#fig:081 width=70%} 

Просмотрим захваченный трафик(рис. [-@fig:082]). 

![Захваченный трафик](image/82.png){#fig:082 width=70%} 

Настроим маршрутизацию по протоколу RIPng и посмотрим метрики протокола(рис. [-@fig:083]) и (рис. [-@fig:084]).

![RIPng](image/83.png){#fig:083 width=70%} 
 
![Метрики протокола](image/84.png){#fig:084 width=70%} 

Пропингуем оконечное устройство (рис. [-@fig:085]). 

![Пинг](image/85.png){#fig:085 width=70%} 

Настроим маршрутизацию по протоколу OSPF и посмотрим метрики протокола (рис. [-@fig:086]) и (рис. [-@fig:087]). 

![Настройка OSPF](image/86.png){#fig:086 width=70%} 

![Метрики протокола](image/87.png){#fig:087 width=70%} 

Пропингуем оконечное устройство(рис. [-@fig:088]). 

![Пинг](image/88.png){#fig:088 width=70%} 

Просмотрим захваченный трафик (рис. [-@fig:089]). 

![Захваченный трафик](image/89.png){#fig:089 width=70%} 

Настроим маршрутизацию по протоколу OSPFv3 и посмотрим метрики протокола (рис. [-@fig:090]) и (рис. [-@fig:091]).

![Настройка OSPFv3](image/90.png){#fig:090 width=70%} 
 
![Метрики протокола](image/91.png){#fig:091 width=70%} 

Пропингуем оконечное устройство(рис. [-@fig:092]).

![Пинг](image/92.png){#fig:092 width=70%} 

Просмотрим захваченный трафик (рис. [-@fig:093]). 

![Захваченный трафик](image/93.png){#fig:093 width=70%}

# Выводы

В ходе лабораторной работы я изучила принципы маршрутизации в IPv4- и IPv6-сетях и принципы настройки сетевого оборудования.